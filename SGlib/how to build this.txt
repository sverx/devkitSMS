# compile the modules
sdcc -o SGlib.rel            -c -mz80 --max-allocs-per-node 100000 SGlib.c
sdcc -o SGlib_spriteClip.rel -c -mz80 --max-allocs-per-node 100000 SGlib_spriteClip.c
sdcc -o SGlib_zx7.rel        -c -mz80 --max-allocs-per-node 100000 SGlib_zx7.c
sdcc -o SGlib_zx7_VRAM.rel   -c -mz80 --max-allocs-per-node 100000 SGlib_zx7_VRAM.c
sdcc -o SGlib_bitmap.rel     -c -mz80 --max-allocs-per-node 100000 SGlib_bitmap.c
sdcc -o SGlib_debug.rel      -c -mz80 --max-allocs-per-node 100000 SGlib_debug.c
sdcc -o SGlib_keyboard.rel   -c -mz80 --max-allocs-per-node 100000 SGlib_keyboard.c

# create the library archive
sdar r SGlib.lib SGlib.rel SGlib_spriteClip.rel SGlib_zx7.rel SGlib_zx7_VRAM.rel SGlib_bitmap.rel SGlib_debug.rel SGlib_keyboard.rel

# compile the modules for ColecoVision
sdcc -o SGlib_CV.rel          -c -mz80 --max-allocs-per-node 100000 -D TARGET_CV SGlib.c
sdcc -o SGlib_bitmap_CV.rel   -c -mz80 --max-allocs-per-node 100000 -D TARGET_CV SGlib_bitmap.c
sdcc -o SGlib_zx7_VRAM_CV.rel -c -mz80 --max-allocs-per-node 100000 -D TARGET_CV SGlib_zx7_VRAM.c

# create the ColecoVision library archive
sdar r SGlib_CV.lib SGlib_CV.rel SGlib_spriteClip.rel SGlib_zx7.rel SGlib_zx7_VRAM_CV.rel SGlib_bitmap_CV.rel SGlib_debug.rel

